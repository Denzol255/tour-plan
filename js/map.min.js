var spinner=$(".ymap-container").children(".loader");var check_if_load=false;var myMapTemp,myPlacemarkTemp;function init(){var a=new ymaps.Map("map-yandex",{center:[7.838196,98.298813],zoom:17,controls:["zoomControl","fullscreenControl"]});var b=new ymaps.Placemark([7.838196,98.298813],{iconLayout:"default#imageWithContent",iconImageSize:[50,50],iconImageOffset:[-25,-50]});a.geoObjects.add(b);var c=a.layers.get(0).get(0);waitForTilesLoad(c).then(function(){spinner.removeClass("is-active")})}function waitForTilesLoad(a){return new ymaps.vow.Promise(function(e,d){var c=getTileContainer(a),b=true;c.tiles.each(function(g,f){if(!g.isReady()){b=false}});if(b){e()}else{c.events.once("ready",function(){e()})}})}function getTileContainer(b){for(var a in b){if(b.hasOwnProperty(a)){if(b[a] instanceof ymaps.layer.tileContainer.CanvasContainer||b[a] instanceof ymaps.layer.tileContainer.DomContainer){return b[a]}}}return null}function loadScript(b,c){var a=document.createElement("script");if(a.readyState){a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete"){a.onreadystatechange=null;c()}}}else{a.onload=function(){c()}}a.src=b;document.getElementsByTagName("head")[0].appendChild(a)}var ymap=function(){$(".ymap-container").mouseenter(function(){if(!check_if_load){check_if_load=true;spinner.addClass("is-active");loadScript("https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;loadByRequire=1",function(){ymaps.load(init)})}})};$(function(){ymap()});